<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>KGJS Day 1</title>
    <link href="https://kineticgraphs.org/css/kg.0.2.7.css" rel="stylesheet" type="text/css">
    <script src="https://kineticgraphs.org/js/kg.0.2.7.js"></script>
</head>
<body>

<h2>Consumer Surplus</h2>
<p>This graph shows the demand curve for albums and a horizontal green line representing the market price per unit.</p>

<div class="kg-container">

params:
  - {name: x, value: 4, min: 0, max: 10}
  - {name: p, value: 4, min: 0, max: 10}
calcs:
  v: (10*(params.x) - 0.5*(params.x)^2)
  mv: (10 - params.x)
  exp: (params.p*params.x)
  cs: (calcs.v - calcs.exp)
  xStar: (10 - params.p)
  csStar: (0.5*(10-params.p)^2)
layout:
  OneGraphPlusSidebar:
    graph:
      xAxis:
        max: 11
        title: Quantity of album $(Q)$
      yAxis:
        max: 11
        title: Price of album $(P)$
      objects:

        - Line:
            yIntercept: 10
            slope: -1
            color: blue
            label:
              text: \text{Demand}
              x: 2
              position: bl
              bgcolor: none
              
        - Area:
            fn1: 10 - x
            fn2: params.p
            max: params.x

        - Line:
            yIntercept: params.p
            color: green
            drag:
              - vertical: p
            label:
              text: \text{Price }(P)
              x: 10.5
              position: br
              bgcolor: none

        - Point:
            coordinates: [params.x, calcs.mv]
            r: 4
            drag:
              - horizontal: x
            color: blue
            droplines:
              vertical: "`Q = ${params.x.toFixed(0)}`"
              
        - Label:
            coordinates: [(0.5*params.x), (0.5*(10+params.p-0.5*params.x))]
            text: calcs.cs.toFixed(2)
            color: blue
            bgcolor: none
            fontSize: 9
            show: params.x < calcs.xStar

        - Label:
            coordinates: [(0.5*calcs.xStar), (0.5*(10+params.p-0.5*calcs.xStar))]
            text: calcs.csStar.toFixed(2)
            color: blue
            bgcolor: none
            fontSize: 9
            show: params.x >= calcs.xStar

        - Label:
            coordinates: [(0.3*calcs.xStar + 0.7*params.x), (0.7*params.p+0.3*calcs.mv)]
            text: (calcs.cs-calcs.csStar).toFixed(2)
            color: black
            bgcolor: none
            fontSize: 9
            show: params.x > calcs.xStar




    sidebar:
      controls:
        - title: Intuition of consumer surplus
          description: Consumer Surplus is the difference between how much a consumer is willing to pay for a good or service (their marginal benefit) and how much they actually have to pay (the market price).
          sliders:
            - param: p
              label: P
            - param: x
              label: Q
          divs:
            - html: "`$$\\\\begin{aligned}  \\\\text{Consumer surplus} = \\\\$ ${calcs.cs.toFixed(2)}\\\\end{aligned}$$`"

    explanation:
      divs:
        - html: 'Because the marginal benefit is greater then the price at this quantity, consumer surplus could be increased by increasing quantity.'
          show: params.x < calcs.xStar
        - html: 'Because the marginal benefit is less then the price at this quantity, consumer surplus could be increased by decreasing quantity.'
          show: params.x > calcs.xStar
        - html: 'Because the marginal benefit equals the price at this quantity, consumer surplus is maximized. Any increase or decrease in quantity would reduce consumer surplus.'
          show: params.x == calcs.xStar
</div>

</body>
</html>
